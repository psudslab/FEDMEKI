{
    "models": {
        "octavius": {
            "model_name": "Octavius",
            "agent_name": "DeepSpeedAgent",
            "stage1_train_dataset": "OctaviusDataset",
            "test_dataset": "SelfInstructTestDataset"
        }
    },
    "logging_step": 5,
    "max_len": 256,
    "penalty_alpha": 0.6,
    "top_k": 1,
    "top_p": 0.1,
    "random_prefix_len": 5,
    "sample_num": 2,
    "decoding_method": "sampling",
    "generate_len": 128,
    "seed": 42,
    "warmup_rate": 0.1,
    "epochs": 10,
    "max_length": 256,
    "max_shard_size": "10GB",
    "peft_type": "moe_lora",
    "lora_r": 8,
    "lora_alpha": 32,
    "lora_dropout": 0.1,
    "lora_target_modules": [
        "wqkv",
        "wo",
        "w1",
        "w2",
        "w3",
        "output"
    ],
    "moe_lora_num_experts": 4,
    "moe_gate_mode": "top2_gate",
    "octavius_modality": [
        "image"
    ],
    "find_unused_parameters": true,
    "data_path_2d": "/data/xiaochen/FedMFM/preprocessed_jsons/medqa_server.json",
    "data_path_3d": "../data/Octavius/3D_Instruct/meta_file/scan2inst_train.json",
    "vision_root_path_2d": "../data/Octavius/2D_Instruct",
    "vision_root_path_3d": "../data/Octavius/3D_Instruct",
    "loop_2d": 1,
    "loop_3d": 0,
    "deepspeed": {
        "train_batch_size": 64,
        "train_micro_batch_size_per_gpu": 8,
        "gradient_accumulation_steps": 8,
        "gradient_clipping": 1,
        "steps_per_print": 1,
        "zero_optimization": {
            "allgather_bucket_size": 500000000,
            "allgather_partitions": true,
            "contiguous_gradients": true,
            "offload_optimizer": {
                "device": "cpu"
            },
            "stage": 1
        },
        "optimizer": {
            "type": "Adam",
            "params": {
                "betas": [
                    0.9,
                    0.95
                ],
                "eps": 1e-06,
                "lr": 0.0005,
                "weight_decay": 1e-05
            }
        },
        "scheduler": {
            "type": "WarmupDecayLR",
            "params": {
                "total_num_steps": 20000,
                "warmup_max_lr": 0.0001,
                "warmup_min_lr": 0,
                "warmup_num_steps": 10
            }
        },
        "fp16": {
            "enabled": true,
            "min_loss_scale": 128,
            "opt_level": "O2"
        },
        "bf16": {
            "enable": false
        },
        "activation_checkpointing": {
            "partition_activations": true,
            "cpu_checkpointing": true,
            "contiguous_memory_optimization": false,
            "number_checkpoints": null,
            "synchronize_checkpoint_boundary": false,
            "profile": false
        }
    },
    "cfg": "config/Octavius/octavius_2d_e4_bs64.yaml",
    "data_path": null,
    "vision_root_path": null,
    "max_tgt_len": 128,
    "vision_type": "image",
    "use_system": true,
    "local_rank": 1,
    "save_path": "/data/xiaochen/FedMFM/ckpt/ours_fedprox_multi",
    "log_path": "../ckpt/octavius_2d_e4_bs64/log_rest/",
    "model": "octavius",
    "encoder_pretrain": "clip",
    "encoder_ckpt_path": null,
    "llm_ckpt_path": "/data/xiaochen/FedMFM/MMedLM2/",
    "delta_ckpt_path": null,
    "llm_proj_path": null,
    "gradient_checkpointing": false,
    "vision_feature_type": "local",
    "vision_output_layer": -1,
    "num_vision_token": 198,
    "conv_template": "default",
    "stage": 1,
    "use_color": false,
    "use_height": false,
    "num_points": 40000,
    "use_flash_attn": false,
    "use_xformers": false,
    "num_clients": "5",
    "root_dir": "../",
    "mode": "train",
    "master_ip": "127.0.0.1",
    "master_port": "2333",
    "world_size": 1
}